/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
 */
repositories {
	maven {
		url uri('https://maven.pkg.github.com/vitkud/test-packages')
		credentials {
			username = project.findProperty('gpr.user') ?: System.getenv('USERNAME')
			password = project.findProperty('gpr.key') ?: System.getenv('PASSWORD')
		}
	}
}

configurations.all {
	resolutionStrategy {
		cacheDynamicVersionsFor 0, 'seconds'
		cacheChangingModulesFor 0, 'seconds'
	}
}

configurations {
	test
}

dependencies {
	test 'com.github.vitkud:test-packages:master-SNAPSHOT'
}

task test {
	doLast {
		configurations.test.dependencies.each { dep ->
			println dep
			println configurations.test.fileCollection(dep).singleFile.text
		}
	}
}
